<!DOCTYPE HTML>
<html>
	<head>
		<title>TheNatureOfCode - Showcase</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body class="is-preload">
		<!-- wrapper -->
		<div id="wrapper">
			<!-- main -->
			<div id="main">
				<div class="inner">
					<!-- header -->
					<header id="header">
						The Nature Of Code &nbsp;<strong> Chp03 - Oscillation</strong>
							<ul class="icons">
								<li>
									<a href="https://github.com/liz-peng/TheNatureOfCode-p5.js.git" target="_blank" class="icon fa-github"></a>
								</li>
							</ul>
					</header>

					<!-- section 3.1 -->
					<section class="banner">
						<div class="content">
							<header>
								<h3>Example 3.1<br>Angular motion using rotate()
								</h3>
							</header>
							<p>
								The baton starts onscreen with no rotation and then spins faster and faster as the angle of rotation accelerates &nbsp; <a href="https://editor.p5js.org/liz-peng/sketches/Vaf6STaK0" target="_blank" class="button">p5.js</a>
							</p>
							<!-- code -->
							<pre><code>let angle = 0; //location
let aVelocity = 0; //velocity
let aAcceleration = 0.0001; //accelaration

function setup() {
  createCanvas(560,390);
}

function draw() {
  background(220);
    fill(63,63,147);
  stroke(0);
  strokeWeight(2);
  
  translate(width/2, height/2);
  rotate(angle);
    line(-60, 0, 60, 0);
  ellipse(60, 0, 16, 16);
  ellipse(-60, 0, 16, 16);

  angle += aVelocity; //angular = velocity.add(acceration)
  aVelocity += aAcceleration; //angular = location.add(velocity)
}
							</code></pre>
						</div>
						<span class="p5 object">
							<iframe style="width: 100%; height: 100%; overflow: hidden; padding-top: 60px;" scrolling="no" src="https://editor.p5js.org/liz-peng/embed/Vaf6STaK0"></iframe>
						</span>
					</section>

                    <!-- section 3.2 -->
                    <section class="banner">
                        <div class="content">
                            <header>
                                <h3>Example 3.2<br>Forces with (arbitrary) angular motion
                                </h3>
                            </header>
                            <p>
                                <a href="https://editor.p5js.org/liz-peng/sketches/JM-9q5PwO" target="_blank" class="button">p5.js</a>
                            </p>
                            <!-- code -->
                            <pre><code>let movers = [];
let attractor;

function setup() {
  createCanvas(560,390);
  for (let i = 0; i < 20; i++) {
    movers.push(new Mover(random(0.1, 2), random(width), random(height)));
  }
  attractor = new Attractor();
}

function draw() {
  background(220);
    attractor.display();
  for (let i = 0; i < movers.length; i++) {
    let force = attractor.calculateAttraction(movers[i]);
    movers[i].applyForce(force);
    movers[i].update();
    movers[i].display();
  }
}

class Attractor { //an object for a draggable attractive body
  constructor() {
    this.location = createVector(width / 2, height / 2);
    this.mass = 20;
    this.G = 1;
  }

  calculateAttraction(m) {
    // Calculate direction of force
    let force = p5.Vector.sub(this.location, m.location);
    // Distance between objects
    let distance = force.mag();
    // Limiting the distance to eliminate "extreme" results for very close or very far objects
    distance = constrain(distance, 5, 25);
    // Normalize vector (distance doesn't matter here, we just want this vector for direction)
    force.normalize();
    // Calculate gravitional force magnitude
    let strength = (this.G * this.mass * m.mass) / (distance * distance);
    // Get force vector --> magnitude * direction
    force.mult(strength);
    return force;
  }

  display() {
    ellipseMode(CENTER);
    strokeWeight(2);
    stroke(0);
    fill(127);
    ellipse(this.location.x, this.location.y, this.mass * 2, this.mass * 2);
  }
}

class Mover {
  constructor(m, x, y) {
    this.location = createVector(x, y);
    this.velocity = createVector(random(-1, 1), random(-1, 1));
    this.acceleration = createVector(0, 0);
    this.mass = m;
    
    this.angle = 0;
    this.aVelocity = 0;
    this.aAcceleration = 0;
  }

  applyForce(force) {
    let f = p5.Vector.div(force, this.mass);
    this.acceleration.add(f);
  }

  update() {
    this.location.add(this.velocity);
    this.velocity.add(this.acceleration);
    this.acceleration.mult(0);
    
    //angular motion
    this.angle += this.aVelocity;
    //calculate angular acceleration according to acceleration's horizontal direction and magnitude
    this.aAcceleration = this.acceleration.x / 10.0;
    this.aVelocity += this.aAcceleration;
    //use constrain() to ensure that angular velocity doesn't spin out of control
    //constrain() function: constrains a value between a minimum and maximum value
    this.aVelocity = constrain(this.aVelocity, -0.1, 0.1);
  }

  display() {
    //push() and pop() are necessary so the rotation of this shape doesn't affect the rest of our world
    stroke(0);
    fill(63,63,147,200);
    rectMode(CENTER);
    //push() function saves the current drawing style settings and transformations
    push();
    translate(this.location.x, this.location.y); //set origin at the shape's location
    rotate(this.angle); //rotate by the angle
    rect(0, 0, this.mass*16, this.mass*16);
    //while pop() function restores these settings.
    pop();
  }
}
                            </code></pre>
                        </div>
                        <span class="p5 object">
                            <iframe style="width: 100%; height: 100%; overflow: hidden; padding-top: 36px;" scrolling="no" src="https://editor.p5js.org/liz-peng/embed/JM-9q5PwO"></iframe>
                        </span>
                    </section>
				</div>
			</div>
			
			<!-- sidebar -->
			<div id="sidebar">
				<div class="inner">
					<!-- menu -->
					<nav id="menu">
						<header class="major">
							<h2>The Nature Of Code</h2>
						</header>
						<ul>
							<li><a href="index.html">Introduction</a></li>
							<li><a href="vectors.html">Vectors</a></li>
							<li><a href="forces.html">Forces</a></li>
                            <li><a href="oscillation.html">Oscillation</a></li>
						</ul>
					</nav>
					
					<!-- Footer -->
					<footer id="footer">
						<ul class="contact">
							<li class="fa-envelope-o">speng2@wpi.edu&nbsp; (Liz Peng)</li>
						</ul>
					</footer>
				</div>
			</div>
		</div>

		<!-- scripts -->
		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/browser.min.js"></script>
		<script src="assets/js/breakpoints.min.js"></script>
		<script src="assets/js/main.js"></script>

	</body>
</html>